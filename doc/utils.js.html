<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Fraction } from "./fraction.js";
import { Matrix } from "./matrix.js";
import { InvalidInputException } from "./exceptions.js";

/**
 * An instance of the `Fraction` class representing the value 1.
 *
 * @type {Fraction}
 */
export const ONE = new Fraction(1, 1);

/**
 * An instance of the `Fraction` class representing the value 0.
 *
 * @type {Fraction}
 */
export const ZERO = new Fraction(0, 1);

/**
 * An instance of the `Fraction` class representing the value -1.
 *
 * @type {Fraction}
 */
export const NEGONE = new Fraction(-1, 1);

/**
 * Converts a string representing a fraction or decimal to a Fraction object.
 *
 * If the input string contains a forward slash (/), it is assumed to represent
 * a fraction and is split into numerator and denominator. If the input string
 * contains a comma (,) or a period (.), it is assumed to represent a decimal
 * and is converted to a whole numbered fraction. If the input string consists
 * of only numerals, it is treated as an integer and a denominator of 1 is used.
 *
 * If the input string is empty, a Fraction object representing 0/1 is returned.
 *
 * @param {string} string - The input string to convert.
 * @throws {InvalidInputException} if the input string is not a valid representation
 * of a fraction or decimal.
 * @returns {Fraction} The Fraction object representing the input string.
 */
export function stringToFraction(string) {
    let numerator;
    let denominator;
    if (string == "") {
        // if string is empty, return 0/1 (0
        return ZERO;
    }

    if (string.includes("/")) {
        // split string into numerator and denominator
        [numerator, denominator] = string.split("/");
        numerator = Number(numerator);
        denominator = Number(denominator);

        if (denominator === 0) {
            throw new InvalidInputException();
        }
    } else if (string.includes(",") || string.includes(".")) {
        // comma or dot; convert to whole numbered fraction
        let decimal = Number(string);

        // get number of digits after comma/dot
        let digits = string.split(".")[1].length;
        denominator = 10 ** digits;
        numerator = decimal * denominator;
    } else if (string.match(/^-?[0-9]+$/)) {
        // string consists of only numerals
        numerator = Number(string);
        denominator = 1;
    } else {
        throw new InvalidInputException();
    }

    let fraction = new Fraction(numerator, denominator);
    fraction = fraction.reduce();
    return fraction;
}

/**

    Returns an n x n unit matrix.
    @param {number} n - The number of rows and columns of the matrix.
    @returns {Matrix} - The n x n unit matrix.
    */
export function getUnitMatrix(n) {
    let matrix = [];
    for (let i = 0; i &lt; n; i++) {
        matrix.push([]);
        for (let j = 0; j &lt; n; j++) {
            if (i == j) {
                matrix[i].push(new Fraction(1, 1));
            } else {
                matrix[i].push(new Fraction(0, 1));
            }
        }
    }
    return new Matrix(matrix);
}

/**

    Adds keydown event listener to move focus between cells of multiple tables.
    @param {Array} tables - Array of table objects.
    @param {boolean} nextTableToTheRight - If true, moves focus to the next table to the right.
    */
export function addKeyDownListener(tables, nextTableToTheRight = false) {
    let tableIds = tables.map(table => String(table.id));

    document.addEventListener("keydown", function (e) {
        let activeCellId = document.activeElement.id;
        let row = 0;
        let column = 0;
        let tableId = 0;
        let tableIdx = 0;

        if (activeCellId !== "") {
            tableId = activeCellId.split("-")[0];
            tableIdx = tableIds.indexOf(tableId);
            row = Number(activeCellId.split("-")[1]);
            column = Number(activeCellId.split("-")[2]);
        }

        if (e.code == "ArrowUp" &amp;&amp; row > 0) {
            row -= 1;
        } else if (e.code == "ArrowDown" &amp;&amp; row &lt; tables[0].rows.length - 1) {
            row += 1;
        } else if (e.code == "ArrowLeft" &amp;&amp; column > 0) {
            column -= 1;
        } else if (e.code == "ArrowRight" &amp;&amp; column &lt; tables[0].nColumns - 1) {
            column += 1;
        } else if (
            e.code == "ArrowUp" &amp;&amp;
            tableIdx > 0 &amp;&amp;
            !nextTableToTheRight
        ) {
            tableId -= 1;
            row = tables[tableIdx].rows.length - 1;
        } else if (
            e.code == "ArrowDown" &amp;&amp;
            tableIdx &lt; tables.length - 1 &amp;&amp;
            !nextTableToTheRight
        ) {
            tableIdx += 1;
            row = 0;
        } else if (
            e.code == "ArrowLeft" &amp;&amp;
            tableIdx > 0 &amp;&amp;
            nextTableToTheRight
        ) {
            tableIdx -= 1;
            column = tables[0].nColumns - 1;
        } else if (
            e.code == "ArrowRight" &amp;&amp;
            tableIdx &lt; tables.length - 1 &amp;&amp;
            nextTableToTheRight
        ) {
            tableIdx += 1;
            column = 0;
        } else {
            return;
        }
        tableId = tableIds[tableIdx];
        document.getElementById(`${tableId}-${row}-${column}`).focus();
    });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Fraction.html">Fraction</a></li><li><a href="Matrix.html">Matrix</a></li><li><a href="Table.html">Table</a></li></ul><h3>Global</h3><ul><li><a href="global.html#NEGONE">NEGONE</a></li><li><a href="global.html#ONE">ONE</a></li><li><a href="global.html#ZERO">ZERO</a></li><li><a href="global.html#addKeyDownListener">addKeyDownListener</a></li><li><a href="global.html#calculate">calculate</a></li><li><a href="global.html#gaussElimination">gaussElimination</a></li><li><a href="global.html#getUnitMatrix">getUnitMatrix</a></li><li><a href="global.html#stringToFraction">stringToFraction</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Feb 26 2023 00:49:56 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
